import{r as n}from"./react-lj-GjI_S.js";import{r as vn}from"./react-dom-CWDkwPos.js";const Rt="carousel",Ke="controller",gn="navigation",En="no-scroll",qe="portal",bn="root",Ot="toolbar",Ue="fullscreen",mt="thumbnails",pt="zoom",Ae="loading",We="error",Ze="complete",wn="placeholder",xn=e=>`active-slide-${e}`,Tt="fullsize",Ge="flex_center",Cn="no_scroll",kt="no_scroll_padding",je="slide",Dt="slide_wrapper",_n="slide_wrapper_interactive",le="prev",se="next",vt="swipe",de="close",Ft="onPointerDown",At="onPointerMove",Wt="onPointerUp",Zt="onPointerLeave",Vt="onPointerCancel",Qe="onKeyDown",Pn="onKeyUp",Je="onWheel",Sn="Escape",Mn="ArrowLeft",In="ArrowRight",Ln="button",Xe="icon",$t="contain",gt="cover",zt="Unknown action type",Ut="yarl__";function G(...e){return[...e].filter(Boolean).join(" ")}function R(e){return`${Ut}${e}`}function H(e){return`--${Ut}${e}`}function ve(e,t){return`${e}${t?`_${t}`:""}`}function et(e){return t=>ve(e,t)}function yn(e,t){var r;return(r=e==null?void 0:e[t])!==null&&r!==void 0?r:t}function Me(...e){return()=>{e.forEach(t=>{t()})}}function te(e,t,r){return()=>{const o=n.useContext(r);if(!o)throw new Error(`${e} must be used within a ${t}.Provider`);return o}}function tt(){return typeof window<"u"}function nt(e,t=0){const r=10**t;return Math.round((e+Number.EPSILON)*r)/r}function fe(e){return e.type===void 0||e.type==="image"}function ot(e,t){return e.imageFit===gt||e.imageFit!==$t&&t===gt}function Ie(e){return typeof e=="string"?Number.parseInt(e,10):e}function Pe(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=Ie(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function Nn(e,t){const r=Pe(t),o=r.percent!==void 0?e.width/100*r.percent:r.pixel;return{width:Math.max(e.width-2*o,0),height:Math.max(e.height-2*o,0)}}function Rn(){return(tt()?window==null?void 0:window.devicePixelRatio:void 0)||1}function Xt(e,t){return t>0?(e%t+t)%t:0}function Ht(e){return e.length>0}function Yt(e,t){return e[Xt(t,e.length)]}function He(e,t){return Ht(e)?Yt(e,t):void 0}function On(e){return fe(e)?e.src:void 0}function Bt(e,t,r){if(!r)return e;const{buttons:o,...i}=e,c=o.findIndex(s=>s===t),l=n.isValidElement(r)?n.cloneElement(r,{key:t},null):r;if(c>=0){const s=[...o];return s.splice(c,1,l),{buttons:s,...i}}return{buttons:[l,...o],...i}}function Tn(e,t,r=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),r))}const kn=Number(n.version.split(".")[0])>=19;function Dn(e){return{inert:kn?e:e?"":void 0}}function Fn(e){e.scrollTop}const Ye={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[de]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:$t,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1,disableSwipeNavigation:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function ne(e,t){return{name:e,component:t}}function Z(e,t){return{module:e,children:t}}function Kt(e,t,r){return e.module.name===t?r(e):e.children?[Z(e.module,e.children.flatMap(o=>{var i;return(i=Kt(o,t,r))!==null&&i!==void 0?i:[]}))]:[e]}function ue(e,t,r){return e.flatMap(o=>{var i;return(i=Kt(o,t,r))!==null&&i!==void 0?i:[]})}function An(e,t=[],r=[]){let o=e;const i=v=>{const p=[...o];for(;p.length>0;){const g=p.pop();if((g==null?void 0:g.module.name)===v)return!0;g!=null&&g.children&&p.push(...g.children)}return!1},c=(v,p)=>{if(v===""){o=[Z(p,o)];return}o=ue(o,v,g=>[Z(p,[g])])},l=(v,p)=>{o=ue(o,v,g=>[Z(g.module,[Z(p,g.children)])])},s=(v,p,g)=>{o=ue(o,v,I=>{var C;return[Z(I.module,[...g?[Z(p)]:[],...(C=I.children)!==null&&C!==void 0?C:[],...g?[]:[Z(p)]])]})},a=(v,p,g)=>{o=ue(o,v,I=>[...g?[Z(p)]:[],I,...g?[]:[Z(p)]])},u=v=>{l(Ke,v)},f=(v,p)=>{o=ue(o,v,g=>[Z(p,g.children)])},d=v=>{o=ue(o,v,p=>p.children)},m=v=>{r.push(v)};return t.forEach(v=>{v({contains:i,addParent:c,append:l,addChild:s,addSibling:a,addModule:u,replace:f,remove:d,augment:m})}),{config:o,augmentation:v=>r.reduce((p,g)=>g(p),v)}}const qt=n.createContext(null),ge=te("useDocument","DocumentContext",qt);function Wn({nodeRef:e,children:t}){const r=n.useMemo(()=>{const o=c=>{var l;return((l=c||e.current)===null||l===void 0?void 0:l.ownerDocument)||document};return{getOwnerDocument:o,getOwnerWindow:c=>{var l;return((l=o(c))===null||l===void 0?void 0:l.defaultView)||window}}},[e]);return n.createElement(qt.Provider,{value:r},t)}const Gt=n.createContext(null),Le=te("useEvents","EventsContext",Gt);function Zn({children:e}){const[t]=n.useState({});n.useEffect(()=>()=>{Object.keys(t).forEach(o=>delete t[o])},[t]);const r=n.useMemo(()=>{const o=(l,s)=>{var a;(a=t[l])===null||a===void 0||a.splice(0,t[l].length,...t[l].filter(u=>u!==s))};return{publish:(...[l,s])=>{var a;(a=t[l])===null||a===void 0||a.forEach(u=>u(s))},subscribe:(l,s)=>(t[l]||(t[l]=[]),t[l].push(s),()=>o(l,s)),unsubscribe:o}},[t]);return n.createElement(Gt.Provider,{value:r},e)}const jt=n.createContext(null),Y=te("useLightboxProps","LightboxPropsContext",jt);function Vn({children:e,...t}){return n.createElement(jt.Provider,{value:t},e)}const Qt=n.createContext(null),ie=te("useLightboxState","LightboxStateContext",Qt),Jt=n.createContext(null),$n=te("useLightboxDispatch","LightboxDispatchContext",Jt);function zn(e,t){switch(t.type){case"swipe":{const{slides:r}=e,o=(t==null?void 0:t.increment)||0,i=e.globalIndex+o,c=Xt(i,r.length),l=He(r,c),s=o||t.duration!==void 0?{increment:o,duration:t.duration,easing:t.easing}:void 0;return{slides:r,currentIndex:c,globalIndex:i,currentSlide:l,animation:s}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:He(t.slides,t.index)}:e;default:throw new Error(zt)}}function Un({slides:e,index:t,children:r}){const[o,i]=n.useReducer(zn,{slides:e,currentIndex:t,globalIndex:t,currentSlide:He(e,t)});n.useEffect(()=>{i({type:"update",slides:e,index:t})},[e,t]);const c=n.useMemo(()=>({...o,state:o,dispatch:i}),[o,i]);return n.createElement(Jt.Provider,{value:i},n.createElement(Qt.Provider,{value:c},r))}const en=n.createContext(null),ye=te("useTimeouts","TimeoutsContext",en);function Xn({children:e}){const[t]=n.useState([]);n.useEffect(()=>()=>{t.forEach(o=>window.clearTimeout(o)),t.splice(0,t.length)},[t]);const r=n.useMemo(()=>{const o=l=>{t.splice(0,t.length,...t.filter(s=>s!==l))};return{setTimeout:(l,s)=>{const a=window.setTimeout(()=>{o(a),l()},s);return t.push(a),a},clearTimeout:l=>{l!==void 0&&(o(l),window.clearTimeout(l))}}},[t]);return n.createElement(en.Provider,{value:r},e)}const Ne=n.forwardRef(function({label:t,className:r,icon:o,renderIcon:i,onClick:c,style:l,...s},a){const{styles:u,labels:f}=Y(),d=yn(f,t);return n.createElement("button",{ref:a,type:"button",title:d,"aria-label":d,className:G(R(Ln),r),onClick:c,style:{...l,...u.button},...s},i?i():n.createElement(o,{className:R(Xe),style:u.icon}))});function Hn(e,t){const r=o=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...o},t);return r.displayName=e,r}function oe(e,t){return Hn(e,n.createElement("g",{fill:"currentColor"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}const Yn=oe("Close",n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Bn=oe("Previous",n.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Kn=oe("Next",n.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),qn=oe("Loading",n.createElement(n.Fragment,null,Array.from({length:8}).map((e,t,r)=>n.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/r.length*(t+1),transform:`rotate(${360/r.length*t}, 12, 12)`})))),Gn=oe("Error",n.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),j=tt()?n.useLayoutEffect:n.useEffect;function rt(){const[e,t]=n.useState(!1);return n.useEffect(()=>{var r,o;const i=(r=window.matchMedia)===null||r===void 0?void 0:r.call(window,"(prefers-reduced-motion: reduce)");t(i==null?void 0:i.matches);const c=l=>t(l.matches);return(o=i==null?void 0:i.addEventListener)===null||o===void 0||o.call(i,"change",c),()=>{var l;return(l=i==null?void 0:i.removeEventListener)===null||l===void 0?void 0:l.call(i,"change",c)}},[]),e}function jn(e){let t=0,r=0,o=0;const c=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(c){const l=c[1].split(",").map(Ie);l.length===6?(t=l[4],r=l[5]):l.length===16&&(t=l[12],r=l[13],o=l[14])}return{x:t,y:r,z:o}}function Et(e,t){const r=n.useRef(void 0),o=n.useRef(void 0),i=rt();return j(()=>{var c,l,s;if(e.current&&r.current!==void 0&&!i){const{keyframes:a,duration:u,easing:f,onfinish:d}=t(r.current,e.current.getBoundingClientRect(),jn(e.current))||{};if(a&&u){(c=o.current)===null||c===void 0||c.cancel(),o.current=void 0;try{o.current=(s=(l=e.current).animate)===null||s===void 0?void 0:s.call(l,a,{duration:u,easing:f})}catch(m){console.error(m)}o.current&&(o.current.onfinish=()=>{o.current=void 0,d==null||d()})}}r.current=void 0}),{prepareAnimation:c=>{r.current=c},isAnimationPlaying:()=>{var c;return((c=o.current)===null||c===void 0?void 0:c.playState)==="running"}}}function tn(){const e=n.useRef(null),t=n.useRef(void 0),[r,o]=n.useState();return{setContainerRef:n.useCallback(c=>{e.current=c,t.current&&(t.current.disconnect(),t.current=void 0);const l=()=>{if(c){const s=window.getComputedStyle(c),a=u=>parseFloat(u)||0;o({width:Math.round(c.clientWidth-a(s.paddingLeft)-a(s.paddingRight)),height:Math.round(c.clientHeight-a(s.paddingTop)-a(s.paddingBottom))})}else o(void 0)};l(),c&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(l),t.current.observe(c))},[]),containerRef:e,containerRect:r}}function _e(){const e=n.useRef(void 0),{setTimeout:t,clearTimeout:r}=ye();return n.useCallback((o,i)=>{r(e.current),e.current=t(o,i>0?i:0)},[t,r])}function D(e){const t=n.useRef(e);return j(()=>{t.current=e}),n.useCallback((...r)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...r)},[])}function bt(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Be(e,t){return n.useMemo(()=>e==null&&t==null?null:r=>{bt(e,r),bt(t,r)},[e,t])}function Qn(e,t=!1){const r=n.useRef(!1);j(()=>{t&&r.current&&(r.current=!1,e())},[t,e]);const o=n.useCallback(()=>{r.current=!0},[]),i=n.useCallback(()=>{r.current=!1},[]);return{onFocus:o,onBlur:i}}function it(){const[e,t]=n.useState(!1);return j(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function Jn(){const[e]=n.useState({}),t=n.useCallback((i,c)=>{var l;(l=e[i])===null||l===void 0||l.forEach(s=>{c.isPropagationStopped()||s(c)})},[e]),r=n.useMemo(()=>({onPointerDown:i=>t(Ft,i),onPointerMove:i=>t(At,i),onPointerUp:i=>t(Wt,i),onPointerLeave:i=>t(Zt,i),onPointerCancel:i=>t(Vt,i),onKeyDown:i=>t(Qe,i),onKeyUp:i=>t(Pn,i),onWheel:i=>t(Je,i)}),[t]),o=n.useCallback((i,c)=>(e[i]||(e[i]=[]),e[i].unshift(c),()=>{const l=e[i];l&&l.splice(0,l.length,...l.filter(s=>s!==c))}),[e]);return{registerSensors:r,subscribeSensors:o}}function wt(e,t){const r=n.useRef(0),o=_e(),i=D((...c)=>{r.current=Date.now(),e(c)});return n.useCallback((...c)=>{o(()=>{i(c)},t-(Date.now()-r.current))},[t,i,o])}const Ve=et("slide"),$e=et("slide_image");function Se({slide:e,offset:t,render:r,rect:o,imageFit:i,imageProps:c,onClick:l,onLoad:s,onError:a,style:u}){var f,d,m,v,p,g,I;const[C,_]=n.useState(Ae),{publish:h}=Le(),{setTimeout:N}=ye(),b=n.useRef(null);n.useEffect(()=>{t===0&&h(xn(C))},[t,C,h]);const L=D(M=>{("decode"in M?M.decode():Promise.resolve()).catch(()=>{}).then(()=>{M.parentNode&&(_(Ze),N(()=>{s==null||s(M)},0))})}),P=n.useCallback(M=>{b.current=M,M!=null&&M.complete&&L(M)},[L]),T=n.useCallback(M=>{L(M.currentTarget)},[L]),y=D(()=>{_(We),a==null||a()}),k=ot(e,i),W=(M,z)=>Number.isFinite(M)?M:z,Q=W(Math.max(...((d=(f=e.srcSet)===null||f===void 0?void 0:f.map(M=>M.width))!==null&&d!==void 0?d:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((m=b.current)===null||m===void 0?void 0:m.naturalWidth)||0),S=W(Math.max(...((p=(v=e.srcSet)===null||v===void 0?void 0:v.map(M=>M.height))!==null&&p!==void 0?p:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((g=b.current)===null||g===void 0?void 0:g.naturalHeight)||0),E=Q&&S?{maxWidth:`min(${Q}px, 100%)`,maxHeight:`min(${S}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},x=(I=e.srcSet)===null||I===void 0?void 0:I.sort((M,z)=>M.width-z.width).map(M=>`${M.src} ${M.width}w`).join(", "),O=()=>o&&!k&&e.width&&e.height?o.height/e.height*e.width:Number.MAX_VALUE,F=x&&o&&tt()?`${Math.round(Math.min(O(),o.width))}px`:void 0,{style:V,className:X,...K}=c||{};return n.createElement(n.Fragment,null,n.createElement("img",{ref:P,onLoad:T,onError:y,onClick:l,draggable:!1,className:G(R($e()),k&&R($e("cover")),C!==Ze&&R($e("loading")),X),style:{...E,...u,...V},...K,alt:e.alt,sizes:F,srcSet:x,src:e.src}),C!==Ze&&n.createElement("div",{className:R(Ve(wn))},C===Ae&&(r!=null&&r.iconLoading?r.iconLoading():n.createElement(qn,{className:G(R(Xe),R(Ve(Ae)))})),C===We&&(r!=null&&r.iconError?r.iconError():n.createElement(Gn,{className:G(R(Xe),R(Ve(We)))}))))}const eo=n.forwardRef(function({className:t,children:r,...o},i){const c=n.useRef(null);return n.createElement(Wn,{nodeRef:c},n.createElement("div",{ref:Be(i,c),className:G(R("root"),t),...o},r))});var $;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})($||($={}));function nn(e,t,r,o,i){n.useEffect(()=>i?()=>{}:Me(e(Ft,t),e(At,r),e(Wt,o),e(Zt,o),e(Vt,o)),[e,t,r,o,i])}var q;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(q||(q={}));const ze=30;function to({disableSwipeNavigation:e,closeOnBackdropClick:t},r,o,i,c,l,s,a,u,f,d,m,v,p,g,I){const C=n.useRef(0),_=n.useRef([]),h=n.useRef(void 0),N=n.useRef(0),b=n.useRef(q.NONE),L=n.useCallback(S=>{h.current===S.pointerId&&(h.current=void 0,b.current=q.NONE);const E=_.current;E.splice(0,E.length,...E.filter(x=>x.pointerId!==S.pointerId))},[]),P=n.useCallback(S=>{L(S),S.persist(),_.current.push(S)},[L]),T=n.useCallback(S=>_.current.find(({pointerId:E})=>S.pointerId===E),[]),y=D(S=>{P(S)}),k=(S,E)=>d&&S>E||f&&S<-E,W=D(S=>{const E=T(S);if(E)if(h.current===S.pointerId){const x=Date.now()-N.current,O=C.current;b.current===q.SWIPE?Math.abs(O)>.3*i||Math.abs(O)>5&&x<c?a(O,x):u(O):b.current===q.PULL&&(k(O,2*ze)?p(O,x):g(O)),C.current=0,b.current=q.NONE}else{const{target:x}=S;t&&x instanceof HTMLElement&&x===E.target&&(x.classList.contains(R(je))||x.classList.contains(R(Dt)))&&I()}L(S)}),Q=D(S=>{const E=T(S);if(E){const x=h.current===S.pointerId;if(S.buttons===0){x&&C.current!==0?W(S):L(E);return}const O=S.clientX-E.clientX,F=S.clientY-E.clientY;if(h.current===void 0){const V=X=>{P(S),h.current=S.pointerId,N.current=Date.now(),b.current=X};Math.abs(O)>Math.abs(F)&&Math.abs(O)>ze&&o(O)?e||(V(q.SWIPE),l()):Math.abs(F)>Math.abs(O)&&k(F,ze)&&(V(q.PULL),m())}else x&&(b.current===q.SWIPE?(C.current=O,s(O)):b.current===q.PULL&&(C.current=F,v(F)))}});nn(r,y,Q,W)}function no({preventDefaultWheelX:e,preventDefaultWheelY:t}){const r=n.useRef(null),o=D(i=>{const c=Math.abs(i.deltaX)>Math.abs(i.deltaY);(c&&e||!c&&t||i.ctrlKey)&&i.preventDefault()});return n.useCallback(i=>{var c;i?i.addEventListener("wheel",o,{passive:!1}):(c=r.current)===null||c===void 0||c.removeEventListener("wheel",o),r.current=i},[o])}function oo(e,t,r,o,i,c,l,s,a){const u=n.useRef(0),f=n.useRef(0),d=n.useRef(void 0),m=n.useRef(void 0),v=n.useRef(0),p=n.useRef(void 0),g=n.useRef(0),{setTimeout:I,clearTimeout:C}=ye(),_=n.useCallback(()=>{d.current&&(C(d.current),d.current=void 0)},[C]),h=n.useCallback(()=>{m.current&&(C(m.current),m.current=void 0)},[C]),N=D(()=>{e!==$.SWIPE&&(u.current=0,g.current=0,_(),h())});n.useEffect(N,[e,N]);const b=D(P=>{m.current=void 0,u.current===P&&a(u.current)}),L=D(P=>{if(P.ctrlKey||Math.abs(P.deltaY)>Math.abs(P.deltaX))return;const T=y=>{v.current=y,C(p.current),p.current=y>0?I(()=>{v.current=0,p.current=void 0},300):void 0};if(e===$.NONE){if(Math.abs(P.deltaX)<=1.2*Math.abs(v.current)){T(P.deltaX);return}if(!r(-P.deltaX))return;if(f.current+=P.deltaX,_(),Math.abs(f.current)>30)f.current=0,T(0),g.current=Date.now(),c();else{const y=f.current;d.current=I(()=>{d.current=void 0,y===f.current&&(f.current=0)},i)}}else if(e===$.SWIPE){let y=u.current-P.deltaX;if(y=Math.min(Math.abs(y),o)*Math.sign(y),u.current=y,l(y),h(),Math.abs(y)>.2*o){T(P.deltaX),s(y,Date.now()-g.current);return}m.current=I(()=>b(y),2*i)}else T(P.deltaX)});n.useEffect(()=>t(Je,L),[t,L])}const xt=et("container"),on=n.createContext(null),re=te("useController","ControllerContext",on);function ro({children:e,...t}){var r;const{carousel:o,animation:i,controller:c,on:l,styles:s,render:a}=t,{closeOnPullUp:u,closeOnPullDown:f,preventDefaultWheelX:d,preventDefaultWheelY:m}=c,[v,p]=n.useState(),g=ie(),I=$n(),[C,_]=n.useState($.NONE),h=n.useRef(0),N=n.useRef(0),b=n.useRef(1),{registerSensors:L,subscribeSensors:P}=Jn(),{subscribe:T,publish:y}=Le(),k=_e(),W=_e(),Q=_e(),{containerRef:S,setContainerRef:E,containerRect:x}=tn(),O=Be(no({preventDefaultWheelX:d,preventDefaultWheelY:m}),E),F=n.useRef(null),V=Be(F,void 0),{getOwnerDocument:X}=ge(),K=it(),M=w=>(K?-1:1)*(typeof w=="number"?w:1),z=D(()=>{var w;return(w=S.current)===null||w===void 0?void 0:w.focus()}),Ee=D(()=>t),lt=D(()=>g),be=n.useCallback(w=>y(le,w),[y]),we=n.useCallback(w=>y(se,w),[y]),ae=n.useCallback(()=>y(de),[y]),Oe=w=>!(o.finite&&(M(w)>0&&g.currentIndex===0||M(w)<0&&g.currentIndex===g.slides.length-1)),st=w=>{var A;h.current=w,(A=S.current)===null||A===void 0||A.style.setProperty(H("swipe_offset"),`${Math.round(w)}px`)},Te=w=>{var A,U;N.current=w,b.current=(()=>{const me=f&&w>0?w:u&&w<0?-w:0;return Math.min(Math.max(nt(1-me/60*(1-.5),2),.5),1)})(),(A=S.current)===null||A===void 0||A.style.setProperty(H("pull_offset"),`${Math.round(w)}px`),(U=S.current)===null||U===void 0||U.style.setProperty(H("pull_opacity"),`${b.current}`)},{prepareAnimation:dn}=Et(F,(w,A,U)=>{if(F.current&&x)return{keyframes:[{transform:`translate(0, ${w.rect.y-A.y+U.y}px)`,opacity:w.opacity},{transform:"translate(0, 0)",opacity:1}],duration:w.duration,easing:i.easing.fade}}),at=(w,A)=>{if(u||f){Te(w);let U=0;F.current&&(U=i.fade*(A?2:1),dn({rect:F.current.getBoundingClientRect(),opacity:b.current,duration:U})),Q(()=>{Te(0),_($.NONE)},U),_($.ANIMATION),A||ae()}},{prepareAnimation:fn,isAnimationPlaying:hn}=Et(F,(w,A,U)=>{var J;if(F.current&&x&&(!((J=g.animation)===null||J===void 0)&&J.duration)){const B=Pe(o.spacing),me=(B.percent?B.percent*x.width/100:B.pixel)||0;return{keyframes:[{transform:`translate(${M(g.globalIndex-w.index)*(x.width+me)+w.rect.x-A.x+U.x}px, 0)`},{transform:"translate(0, 0)"}],duration:g.animation.duration,easing:g.animation.easing}}}),he=D(w=>{var A,U;const J=w.offset||0,B=J?i.swipe:(A=i.navigation)!==null&&A!==void 0?A:i.swipe,me=!J&&!hn()?i.easing.navigation:i.easing.swipe;let{direction:xe}=w;const Ce=(U=w.count)!==null&&U!==void 0?U:1;let ke=$.ANIMATION,ee=B*Ce;if(!xe){const pe=x==null?void 0:x.width,ht=w.duration||0,Fe=pe?B/pe*Math.abs(J):B;Ce!==0?(ht<Fe?ee=ee/Fe*Math.max(ht,Fe/5):pe&&(ee=B/pe*(pe-Math.abs(J))),xe=M(J)>0?le:se):ee=B/2}let De=0;xe===le?Oe(M(1))?De=-Ce:(ke=$.NONE,ee=B):xe===se&&(Oe(M(-1))?De=Ce:(ke=$.NONE,ee=B)),ee=Math.round(ee),W(()=>{st(0),_($.NONE)},ee),F.current&&fn({rect:F.current.getBoundingClientRect(),index:g.globalIndex}),_(ke),y(vt,{type:"swipe",increment:De,duration:ee,easing:me})});n.useEffect(()=>{var w,A;!((w=g.animation)===null||w===void 0)&&w.increment&&(!((A=g.animation)===null||A===void 0)&&A.duration)&&k(()=>I({type:"swipe",increment:0}),g.animation.duration)},[g.animation,I,k]);const ut=[P,Oe,(x==null?void 0:x.width)||0,i.swipe,()=>_($.SWIPE),w=>st(w),(w,A)=>he({offset:w,duration:A,count:1}),w=>he({offset:w,count:0})],mn=[()=>{f&&_($.PULL)},w=>Te(w),w=>at(w),w=>at(w,!0)];to(c,...ut,u,f,...mn,ae),oo(C,...ut);const dt=D(()=>{c.focus&&X().querySelector(`.${R(qe)} .${R(xt())}`)&&z()});n.useEffect(dt,[dt]);const ft=D(()=>{var w;(w=l.view)===null||w===void 0||w.call(l,{index:g.currentIndex})});n.useEffect(ft,[g.globalIndex,ft]),n.useEffect(()=>Me(T(le,w=>he({direction:le,...w})),T(se,w=>he({direction:se,...w})),T(vt,w=>I(w))),[T,he,I]);const pn=n.useMemo(()=>({prev:be,next:we,close:ae,focus:z,slideRect:x?Nn(x,o.padding):{width:0,height:0},containerRect:x||{width:0,height:0},subscribeSensors:P,containerRef:S,setCarouselRef:V,toolbarWidth:v,setToolbarWidth:p}),[be,we,ae,z,P,x,S,V,v,p,o.padding]);return n.useImperativeHandle(c.ref,()=>({prev:be,next:we,close:ae,focus:z,getLightboxProps:Ee,getLightboxState:lt}),[be,we,ae,z,Ee,lt]),n.createElement("div",{ref:O,className:G(R(xt()),R(Ge)),style:{...C===$.SWIPE?{[H("swipe_offset")]:`${Math.round(h.current)}px`}:null,...C===$.PULL?{[H("pull_offset")]:`${Math.round(N.current)}px`,[H("pull_opacity")]:`${b.current}`}:null,...c.touchAction!=="none"?{[H("controller_touch_action")]:c.touchAction}:null,...s.container},...c.aria?{role:"region","aria-live":"polite","aria-roledescription":"carousel"}:null,tabIndex:-1,...L},x&&n.createElement(on.Provider,{value:pn},e,(r=a.controls)===null||r===void 0?void 0:r.call(a)))}const io=ne(Ke,ro);function ce(e){return ve(Rt,e)}function Ct(e){return ve(je,e)}function co({slide:e,offset:t}){const r=n.useRef(null),{currentIndex:o}=ie(),{slideRect:i,focus:c}=re(),{render:l,carousel:{imageFit:s,imageProps:a},on:{click:u},styles:{slide:f}}=Y(),{getOwnerDocument:d}=ge(),m=t!==0;n.useEffect(()=>{var p;m&&(!((p=r.current)===null||p===void 0)&&p.contains(d().activeElement))&&c()},[m,c,d]);const v=()=>{var p,g,I,C;let _=(p=l.slide)===null||p===void 0?void 0:p.call(l,{slide:e,offset:t,rect:i});return!_&&fe(e)&&(_=n.createElement(Se,{slide:e,offset:t,render:l,rect:i,imageFit:s,imageProps:a,onClick:m?void 0:()=>u==null?void 0:u({index:o})})),_?n.createElement(n.Fragment,null,(g=l.slideHeader)===null||g===void 0?void 0:g.call(l,{slide:e}),((I=l.slideContainer)!==null&&I!==void 0?I:({children:h})=>h)({slide:e,children:_}),(C=l.slideFooter)===null||C===void 0?void 0:C.call(l,{slide:e})):null};return n.createElement("div",{ref:r,className:G(R(Ct()),!m&&R(Ct("current")),R(Ge)),...Dn(m),style:f,role:"region","aria-roledescription":"slide"},v())}function lo(){const e=Y().styles.slide;return n.createElement("div",{className:R(je),style:e})}function so({carousel:e}){const{slides:t,currentIndex:r,globalIndex:o}=ie(),{setCarouselRef:i}=re(),c=Pe(e.spacing),l=Pe(e.padding),s=Tn(e,t,1),a=[];if(Ht(t))for(let u=r-s;u<=r+s;u+=1){const f=Yt(t,u),d=o-r+u,m=e.finite&&(u<0||u>t.length-1);a.push(m?{key:d}:{key:[`${d}`,On(f)].filter(Boolean).join("|"),offset:u-r,slide:f})}return n.createElement("div",{ref:i,className:G(R(ce()),a.length>0&&R(ce("with_slides"))),style:{[`${H(ce("slides_count"))}`]:a.length,[`${H(ce("spacing_px"))}`]:c.pixel||0,[`${H(ce("spacing_percent"))}`]:c.percent||0,[`${H(ce("padding_px"))}`]:l.pixel||0,[`${H(ce("padding_percent"))}`]:l.percent||0}},a.map(({key:u,slide:f,offset:d})=>f?n.createElement(co,{key:u,slide:f,offset:d}):n.createElement(lo,{key:u})))}const ao=ne(Rt,so);function rn(){const{carousel:e}=Y(),{slides:t,currentIndex:r}=ie(),o=t.length===0||e.finite&&r===0,i=t.length===0||e.finite&&r===t.length-1;return{prevDisabled:o,nextDisabled:i}}function uo(e){var t;const r=it(),{publish:o}=Le(),{animation:i}=Y(),{prevDisabled:c,nextDisabled:l}=rn(),s=((t=i.navigation)!==null&&t!==void 0?t:i.swipe)/2,a=wt(()=>o(le),s),u=wt(()=>o(se),s),f=D(d=>{switch(d.key){case Sn:o(de);break;case Mn:(r?l:c)||(r?u:a)();break;case In:(r?c:l)||(r?a:u)();break}});n.useEffect(()=>e(Qe,f),[e,f])}function _t({label:e,icon:t,renderIcon:r,action:o,onClick:i,disabled:c,style:l}){return n.createElement(Ne,{label:e,icon:t,renderIcon:r,className:R(`navigation_${o}`),disabled:c,onClick:i,style:l,...Qn(re().focus,c)})}function fo({render:{buttonPrev:e,buttonNext:t,iconPrev:r,iconNext:o},styles:i}){const{prev:c,next:l,subscribeSensors:s}=re(),{prevDisabled:a,nextDisabled:u}=rn();return uo(s),n.createElement(n.Fragment,null,e?e():n.createElement(_t,{label:"Previous",action:le,icon:Bn,renderIcon:r,style:i.navigationPrev,disabled:a,onClick:c}),t?t():n.createElement(_t,{label:"Next",action:se,icon:Kn,renderIcon:o,style:i.navigationNext,disabled:u,onClick:l}))}const ho=ne(gn,fo),Pt=R(Cn),mo=R(kt);function po(e){return"style"in e}function St(e,t,r){const o=window.getComputedStyle(e),i=r?"padding-left":"padding-right",c=r?o.paddingLeft:o.paddingRight,l=e.style.getPropertyValue(i);return e.style.setProperty(i,`${(Ie(c)||0)+t}px`),()=>{l?e.style.setProperty(i,l):e.style.removeProperty(i)}}function vo({noScroll:{disabled:e},children:t}){const r=it(),{getOwnerDocument:o,getOwnerWindow:i}=ge();return n.useEffect(()=>{if(e)return()=>{};const c=[],l=i(),{body:s,documentElement:a}=o(),u=Math.round(l.innerWidth-a.clientWidth);if(u>0){c.push(St(s,u,r));const f=s.getElementsByTagName("*");for(let d=0;d<f.length;d+=1){const m=f[d];po(m)&&l.getComputedStyle(m).getPropertyValue("position")==="fixed"&&!m.classList.contains(mo)&&c.push(St(m,u,r))}}return s.classList.add(Pt),()=>{s.classList.remove(Pt),c.forEach(f=>f())}},[r,e,o,i]),n.createElement(n.Fragment,null,t)}const go=ne(En,vo);function Mt(e){return ve(qe,e)}function It(e,t,r){const o=e.getAttribute(t);return e.setAttribute(t,r),()=>{o?e.setAttribute(t,o):e.removeAttribute(t)}}function Eo({children:e,animation:t,styles:r,className:o,on:i,portal:c,close:l}){const[s,a]=n.useState(!1),[u,f]=n.useState(!1),d=n.useRef([]),m=n.useRef(null),{setTimeout:v}=ye(),{subscribe:p}=Le(),I=rt()?0:t.fade;n.useEffect(()=>(a(!0),()=>{a(!1),f(!1)}),[]);const C=D(()=>{d.current.forEach(b=>b()),d.current=[]}),_=D(()=>{var b;f(!1),C(),(b=i.exiting)===null||b===void 0||b.call(i),v(()=>{var L;(L=i.exited)===null||L===void 0||L.call(i),l()},I)});n.useEffect(()=>p(de,_),[p,_]);const h=D(b=>{var L,P,T;Fn(b),f(!0),(L=i.entering)===null||L===void 0||L.call(i);const y=(T=(P=b.parentNode)===null||P===void 0?void 0:P.children)!==null&&T!==void 0?T:[];for(let k=0;k<y.length;k+=1){const W=y[k];["TEMPLATE","SCRIPT","STYLE"].indexOf(W.tagName)===-1&&W!==b&&(d.current.push(It(W,"inert","")),d.current.push(It(W,"aria-hidden","true")))}d.current.push(()=>{var k,W;(W=(k=m.current)===null||k===void 0?void 0:k.focus)===null||W===void 0||W.call(k)}),v(()=>{var k;(k=i.entered)===null||k===void 0||k.call(i)},I)}),N=n.useCallback(b=>{b?h(b):C()},[h,C]);return s?vn.createPortal(n.createElement(eo,{ref:N,className:G(o,R(Mt()),R(kt),u&&R(Mt("open"))),"aria-modal":!0,role:"dialog","aria-live":"polite","aria-roledescription":"lightbox",style:{...t.fade!==Ye.animation.fade?{[H("fade_animation_duration")]:`${I}ms`}:null,...t.easing.fade!==Ye.animation.easing.fade?{[H("fade_animation_timing_function")]:t.easing.fade}:null,...r.root},onFocus:b=>{m.current||(m.current=b.relatedTarget)}},e),c.root||document.body):null}const bo=ne(qe,Eo);function wo({children:e}){return n.createElement(n.Fragment,null,e)}const xo=ne(bn,wo);function Co(e){return ve(Ot,e)}function _o({toolbar:{buttons:e},render:{buttonClose:t,iconClose:r},styles:o}){const{close:i,setToolbarWidth:c}=re(),{setContainerRef:l,containerRect:s}=tn();j(()=>{c(s==null?void 0:s.width)},[c,s==null?void 0:s.width]);const a=()=>t?t():n.createElement(Ne,{key:de,label:"Close",icon:Yn,renderIcon:r,onClick:i});return n.createElement("div",{ref:l,style:o.toolbar,className:R(Co())},e==null?void 0:e.map(u=>u===de?a():u))}const Po=ne(Ot,_o);function cn(e,t){var r;return n.createElement(e.module.component,{key:e.module.name,...t},(r=e.children)===null||r===void 0?void 0:r.map(o=>cn(o,t)))}function So(e,t={}){const{easing:r,...o}=e,{easing:i,...c}=t;return{easing:{...r,...i},...o,...c}}function qo({carousel:e,animation:t,render:r,toolbar:o,controller:i,noScroll:c,on:l,plugins:s,slides:a,index:u,...f}){const{animation:d,carousel:m,render:v,toolbar:p,controller:g,noScroll:I,on:C,slides:_,index:h,plugins:N,...b}=Ye,{config:L,augmentation:P}=An([Z(bo,[Z(go,[Z(io,[Z(ao),Z(Po),Z(ho)])])])],s||N),T=P({animation:So(d,t),carousel:{...m,...e},render:{...v,...r},toolbar:{...p,...o},controller:{...g,...i},noScroll:{...I,...c},on:{...C,...l},...b,...f});return T.open?n.createElement(Vn,{...T},n.createElement(Un,{slides:a||_,index:Ie(u||h)},n.createElement(Xn,null,n.createElement(Zn,null,cn(Z(xo,L),T))))):null}const Mo={auto:!1,ref:null},ln=e=>({...Mo,...e}),sn=n.createContext(null),Io=te("useFullscreen","FullscreenContext",sn);function Lo({fullscreen:e,on:t,children:r}){const{auto:o,ref:i}=ln(e),c=n.useRef(null),[l,s]=n.useState(),[a,u]=n.useState(!1),f=n.useRef(!1),{getOwnerDocument:d}=ge();j(()=>{var h,N,b,L;const P=d();s(!((L=(b=(N=(h=P.fullscreenEnabled)!==null&&h!==void 0?h:P.webkitFullscreenEnabled)!==null&&N!==void 0?N:P.mozFullScreenEnabled)!==null&&b!==void 0?b:P.msFullscreenEnabled)!==null&&L!==void 0&&L))},[d]);const m=n.useCallback(()=>{var h;const N=d(),b=N.fullscreenElement||N.webkitFullscreenElement||N.mozFullScreenElement||N.msFullscreenElement;return((h=b==null?void 0:b.shadowRoot)===null||h===void 0?void 0:h.fullscreenElement)||b},[d]),v=n.useCallback(()=>{const h=c.current;try{h.requestFullscreen?h.requestFullscreen().catch(()=>{}):h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.msRequestFullscreen&&h.msRequestFullscreen()}catch{}},[]),p=n.useCallback(()=>{if(!m())return;const h=d();try{h.exitFullscreen?h.exitFullscreen().catch(()=>{}):h.webkitExitFullscreen?h.webkitExitFullscreen():h.mozCancelFullScreen?h.mozCancelFullScreen():h.msExitFullscreen&&h.msExitFullscreen()}catch{}},[m,d]);n.useEffect(()=>{const h=d(),N=()=>{u(m()===c.current)};return Me(...["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].map(b=>(h.addEventListener(b,N),()=>h.removeEventListener(b,N))))},[m,d]);const g=D(()=>{var h;return(h=t.enterFullscreen)===null||h===void 0?void 0:h.call(t)}),I=D(()=>{var h;return(h=t.exitFullscreen)===null||h===void 0?void 0:h.call(t)});n.useEffect(()=>{a&&(f.current=!0),f.current&&(a?g:I)()},[a,g,I]);const C=D(()=>{var h;return(h=o?v:null)===null||h===void 0||h(),p});n.useEffect(C,[C]);const _=n.useMemo(()=>({fullscreen:a,disabled:l,enter:v,exit:p}),[a,l,v,p]);return n.useImperativeHandle(i,()=>_,[_]),n.createElement("div",{ref:c,className:G(R(Ue),R(Tt))},n.createElement(sn.Provider,{value:_},r))}const yo=oe("EnterFullscreen",n.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})),No=oe("ExitFullscreen",n.createElement("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}));function Ro(){var e;const{fullscreen:t,disabled:r,enter:o,exit:i}=Io(),{render:c}=Y();return r?null:c.buttonFullscreen?n.createElement(n.Fragment,null,(e=c.buttonFullscreen)===null||e===void 0?void 0:e.call(c,{fullscreen:t,disabled:r,enter:o,exit:i})):n.createElement(Ne,{disabled:r,label:t?"Exit Fullscreen":"Enter Fullscreen",icon:t?No:yo,renderIcon:t?c.iconExitFullscreen:c.iconEnterFullscreen,onClick:t?i:o})}function Go({augment:e,contains:t,addParent:r}){e(({fullscreen:o,toolbar:i,...c})=>({toolbar:Bt(i,Ue,n.createElement(Ro,null)),fullscreen:ln(o),...c})),r(t(mt)?mt:Ke,ne(Ue,Lo))}const Oo={maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,scrollToZoom:!1},an=e=>({...Oo,...e});function To(e,t,r,o){const i=n.useRef(void 0),c=n.useRef(void 0),{zoom:l}=Y().animation,s=rt(),a=D(()=>{var u,f,d;if((u=i.current)===null||u===void 0||u.cancel(),i.current=void 0,c.current&&(o!=null&&o.current)){try{i.current=(d=(f=o.current).animate)===null||d===void 0?void 0:d.call(f,[{transform:c.current},{transform:`scale(${e}) translateX(${t}px) translateY(${r}px)`}],{duration:s?0:l??500,easing:i.current?"ease-out":"ease-in-out"})}catch(m){console.error(m)}c.current=void 0,i.current&&(i.current.onfinish=()=>{i.current=void 0})}});return j(a,[e,t,r,a]),n.useCallback(()=>{c.current=o!=null&&o.current?window.getComputedStyle(o.current).transform:void 0},[o])}function ko(e,t){const{on:r}=Y(),o=D(()=>{var i;t||(i=r.zoom)===null||i===void 0||i.call(r,{zoom:e})});n.useEffect(o,[e,o])}function Re(){const{zoom:e}=Y();return an(e)}function Do(e,t){var r,o;let i={width:0,height:0},c={width:0,height:0};const{currentSlide:l}=ie(),{imageFit:s}=Y().carousel,{maxZoomPixelRatio:a}=Re();if(e&&l){const f={...l,...t};if(fe(f)){const d=ot(f,s),m=Math.max(...(((r=f.srcSet)===null||r===void 0?void 0:r.map(p=>p.width))||[]).concat(f.width?[f.width]:[])),v=Math.max(...(((o=f.srcSet)===null||o===void 0?void 0:o.map(p=>p.height))||[]).concat(f.height?[f.height]:[]));m>0&&v>0&&e.width>0&&e.height>0&&(c=d?{width:Math.round(Math.min(m,e.width/e.height*v)),height:Math.round(Math.min(v,e.height/e.width*m))}:{width:m,height:v},c={width:c.width*a,height:c.height*a},i=d?{width:Math.min(e.width,c.width,m),height:Math.min(e.height,c.height,v)}:{width:Math.round(Math.min(e.width,e.height/v*m,m)),height:Math.round(Math.min(e.height,e.width/m*v,v))})}}const u=i.width?Math.max(nt(c.width/i.width,5),1):1;return{imageRect:i,maxZoom:u}}function Lt(e,t){return((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)**.5}function yt(e,t,r=100,o=2){return e*Math.min(1+Math.abs(t/r),o)**Math.sign(t)}function Fo(e,t,r,o,i,c){const l=n.useRef([]),s=n.useRef(0),a=n.useRef(void 0),{globalIndex:u}=ie(),{getOwnerWindow:f}=ge(),{containerRef:d,subscribeSensors:m}=re(),{keyboardMoveDistance:v,zoomInMultiplier:p,wheelZoomDistanceFactor:g,scrollToZoom:I,doubleTapDelay:C,doubleClickDelay:_,doubleClickMaxStops:h,pinchZoomDistanceFactor:N}=Re(),b=n.useCallback(E=>{if(d.current){const{pageX:x,pageY:O}=E,{scrollX:F,scrollY:V}=f(),{left:X,top:K,width:M,height:z}=d.current.getBoundingClientRect();return[x-X-F-M/2,O-K-V-z/2]}return[]},[d,f]),L=D(E=>{const{key:x,metaKey:O,ctrlKey:F}=E,V=O||F,X=()=>{E.preventDefault(),E.stopPropagation()};if(e>1){const M=(z,Ee)=>{X(),i(z,Ee)};x==="ArrowDown"?M(0,v):x==="ArrowUp"?M(0,-v):x==="ArrowLeft"?M(-v,0):x==="ArrowRight"&&M(v,0)}const K=M=>{X(),o(M)};x==="+"||V&&x==="="?K(e*p):x==="-"||V&&x==="_"?K(e/p):V&&x==="0"&&K(1)}),P=D(E=>{if((E.ctrlKey||I)&&Math.abs(E.deltaY)>Math.abs(E.deltaX)){E.stopPropagation(),o(yt(e,-E.deltaY,g),!0,...b(E));return}e>1&&(E.stopPropagation(),I||i(E.deltaX,E.deltaY))}),T=n.useCallback(E=>{const x=l.current;x.splice(0,x.length,...x.filter(O=>O.pointerId!==E.pointerId))},[]),y=n.useCallback(E=>{T(E),E.persist(),l.current.push(E)},[T]),k=D(E=>{var x;const O=l.current;if(E.pointerType==="mouse"&&E.buttons>1||!(!((x=c==null?void 0:c.current)===null||x===void 0)&&x.contains(E.target)))return;e>1&&E.stopPropagation();const{timeStamp:F}=E;O.length===0&&F-s.current<(E.pointerType==="touch"?C:_)?(s.current=0,o(e!==t?e*Math.max(t**(1/h),p):1,!1,...b(E))):s.current=F,y(E),O.length===2&&(a.current=Lt(O[0],O[1]))}),W=D(E=>{const x=l.current,O=x.find(F=>F.pointerId===E.pointerId);if(x.length===2&&a.current){E.stopPropagation(),y(E);const F=Lt(x[0],x[1]),V=F-a.current;Math.abs(V)>0&&(o(yt(e,V,N),!0,...x.map(X=>b(X)).reduce((X,K)=>K.map((M,z)=>X[z]+M/2))),a.current=F);return}e>1&&(E.stopPropagation(),O&&(x.length===1&&i((O.clientX-E.clientX)/e,(O.clientY-E.clientY)/e),y(E)))}),Q=n.useCallback(E=>{const x=l.current;x.length===2&&x.find(O=>O.pointerId===E.pointerId)&&(a.current=void 0),T(E)},[T]),S=n.useCallback(()=>{const E=l.current;E.splice(0,E.length),s.current=0,a.current=void 0},[]);nn(m,k,W,Q,r),n.useEffect(S,[u,S]),n.useEffect(()=>r?()=>{}:Me(S,m(Qe,L),m(Je,P)),[r,m,S,L,P])}function Ao(e,t,r){const[o,i]=n.useState(1),[c,l]=n.useState(0),[s,a]=n.useState(0),u=To(o,c,s,r),{currentSlide:f,globalIndex:d}=ie(),{containerRect:m,slideRect:v}=re(),{zoomInMultiplier:p}=Re(),g=f&&fe(f)?f.src:void 0,I=!g||!(r!=null&&r.current);j(()=>{i(1),l(0),a(0)},[d,g]);const C=n.useCallback((L,P,T)=>{const y=T||o,k=c-(L||0),W=s-(P||0),Q=(e.width*y-v.width)/2/y,S=(e.height*y-v.height)/2/y;l(Math.min(Math.abs(k),Math.max(Q,0))*Math.sign(k)),a(Math.min(Math.abs(W),Math.max(S,0))*Math.sign(W))},[o,c,s,v,e.width,e.height]),_=n.useCallback((L,P,T,y)=>{const k=nt(Math.min(Math.max(L+.001<t?L:t,1),t),5);k!==o&&(P||u(),C(T?T*(1/o-1/k):0,y?y*(1/o-1/k):0,k),i(k))},[o,t,C,u]),h=D(()=>{o>1&&(o>t&&_(t,!0),C())});j(h,[m.width,m.height,h]);const N=n.useCallback(()=>_(o*p),[o,p,_]),b=n.useCallback(()=>_(o/p),[o,p,_]);return{zoom:o,offsetX:c,offsetY:s,disabled:I,changeOffsets:C,changeZoom:_,zoomIn:N,zoomOut:b}}const un=n.createContext(null),ct=te("useZoom","ZoomControllerContext",un);function Wo({children:e}){const[t,r]=n.useState(),{slideRect:o}=re(),{imageRect:i,maxZoom:c}=Do(o,t==null?void 0:t.imageDimensions),{zoom:l,offsetX:s,offsetY:a,disabled:u,changeZoom:f,changeOffsets:d,zoomIn:m,zoomOut:v}=Ao(i,c,t==null?void 0:t.zoomWrapperRef);ko(l,u),Fo(l,c,u,f,d,t==null?void 0:t.zoomWrapperRef);const p=n.useMemo(()=>({zoom:l,maxZoom:c,offsetX:s,offsetY:a,disabled:u,zoomIn:m,zoomOut:v,changeZoom:f}),[l,c,s,a,u,m,v,f]);n.useImperativeHandle(Re().ref,()=>p,[p]);const g=n.useMemo(()=>({...p,setZoomWrapper:r}),[p,r]);return n.createElement(un.Provider,{value:g},e)}const Zo=oe("ZoomIn",n.createElement(n.Fragment,null,n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),n.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),Vo=oe("ZoomOut",n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),Nt=n.forwardRef(function({zoomIn:t,onLoseFocus:r},o){const i=n.useRef(!1),c=n.useRef(!1),{zoom:l,maxZoom:s,zoomIn:a,zoomOut:u,disabled:f}=ct(),{render:d}=Y(),m=f||(t?l>=s:l<=1);return n.useEffect(()=>{m&&i.current&&c.current&&r(),m||(i.current=!0)},[m,r]),n.createElement(Ne,{ref:o,disabled:m,label:t?"Zoom in":"Zoom out",icon:t?Zo:Vo,renderIcon:t?d.iconZoomIn:d.iconZoomOut,onClick:t?a:u,onFocus:()=>{c.current=!0},onBlur:()=>{c.current=!1}})});function $o(){const e=n.useRef(null),t=n.useRef(null),{focus:r}=re(),o=n.useCallback(l=>{var s,a;!((s=l.current)===null||s===void 0)&&s.disabled?r():(a=l.current)===null||a===void 0||a.focus()},[r]),i=n.useCallback(()=>o(e),[o]),c=n.useCallback(()=>o(t),[o]);return n.createElement(n.Fragment,null,n.createElement(Nt,{zoomIn:!0,ref:e,onLoseFocus:c}),n.createElement(Nt,{ref:t,onLoseFocus:i}))}function zo(){const{render:e}=Y(),t=ct();return e.buttonZoom?n.createElement(n.Fragment,null,e.buttonZoom(t)):n.createElement($o,null)}function Uo(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function Xo({current:e,preload:t},{type:r,source:o}){switch(r){case"fetch":return e?{current:e,preload:o}:{current:o};case"done":return o===t?{current:o}:{current:e,preload:t};default:throw new Error(zt)}}function Ho(e){var t,r;const[{current:o,preload:i},c]=n.useReducer(Xo,{}),{slide:l,rect:s,imageFit:a,render:u,interactive:f}=e,d=l.srcSet.sort((b,L)=>b.width-L.width),m=(t=l.width)!==null&&t!==void 0?t:d[d.length-1].width,v=(r=l.height)!==null&&r!==void 0?r:d[d.length-1].height,p=ot(l,a),g=Math.max(...d.map(b=>b.width)),I=Math.min((p?Math.max:Math.min)(s.width,m*(s.height/v)),g),C=Rn(),_=D(()=>{var b;const L=(b=d.find(P=>P.width>=I*C))!==null&&b!==void 0?b:d[d.length-1];(!o||d.findIndex(P=>P.src===o)<d.findIndex(P=>P===L))&&c({type:"fetch",source:L.src})});j(_,[s.width,s.height,C,_]);const h=D(b=>c({type:"done",source:b})),N={WebkitTransform:f?"initial":"translateZ(0)"};return p||Object.assign(N,s.width/s.height<m/v?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),n.createElement(n.Fragment,null,i&&i!==o&&n.createElement(Se,{key:"preload",...e,offset:void 0,slide:{...l,src:i,srcSet:void 0},style:{position:"absolute",visibility:"hidden",...N},onLoad:()=>h(i),render:{...u,iconLoading:()=>null,iconError:()=>null}}),o&&n.createElement(Se,{key:"current",...e,slide:{...l,src:o,srcSet:void 0},style:N}))}function Yo({render:e,slide:t,offset:r,rect:o}){var i;const[c,l]=n.useState(),s=n.useRef(null),{zoom:a,maxZoom:u,offsetX:f,offsetY:d,setZoomWrapper:m}=ct(),v=a>1,{carousel:p,on:g}=Y(),{currentIndex:I}=ie();j(()=>r===0?(m({zoomWrapperRef:s,imageDimensions:c}),()=>m(void 0)):()=>{},[r,c,m]);let C=(i=e.slide)===null||i===void 0?void 0:i.call(e,{slide:t,offset:r,rect:o,zoom:a,maxZoom:u});if(!C&&fe(t)){const _={slide:t,offset:r,rect:o,render:e,imageFit:p.imageFit,imageProps:p.imageProps,onClick:r===0?()=>{var h;return(h=g.click)===null||h===void 0?void 0:h.call(g,{index:I})}:void 0};C=Uo(t)?n.createElement(Ho,{..._,slide:t,interactive:v,rect:r===0?{width:o.width*a,height:o.height*a}:o}):n.createElement(Se,{onLoad:h=>l({width:h.naturalWidth,height:h.naturalHeight}),..._})}return C?n.createElement("div",{ref:s,className:G(R(Tt),R(Ge),R(Dt),v&&R(_n)),style:r===0?{transform:`scale(${a}) translateX(${f}px) translateY(${d}px)`}:void 0},C):null}const jo=({augment:e,addModule:t})=>{e(({zoom:r,toolbar:o,render:i,controller:c,...l})=>{const s=an(r);return{zoom:s,toolbar:Bt(o,pt,n.createElement(zo,null)),render:{...i,slide:a=>{var u;return fe(a.slide)?n.createElement(Yo,{render:i,...a}):(u=i.slide)===null||u===void 0?void 0:u.call(i,a)}},controller:{...c,preventDefaultWheelY:s.scrollToZoom},...l}}),t(ne(pt,Wo))};export{Go as F,qo as L,jo as Z};
